@page "/currentApartament"
@using SeaHome.Services
@inject IJSRuntime JSRuntime
@inject SingletonService singleton
@inject ApartamentService apartmentService
@inject GridFSService service


<h3>CurrentApartament</h3>
<div>@singleton.currentApartament.Text</div>
<div>@singleton.currentApartament.Price</div>
<div>@singleton.currentApartament.Floor.ToString()</div>

@if(apartmentService.GetImages(singleton.currentApartament).Count == 0)
{
    <div>без фотографий</div>
}
else
{   
<div id="currentApartament" class="carousel slide" data-ride="carousel">
  <ol class="carousel-indicators">
    @for(int i=0; i< apartmentService.GetImages(singleton.currentApartament).Count; i++)
        {
            if(i==0)
            (
                <li data-target="#currentApartament" data-slide-to="@i" class="active"></li>
            )
            else
        }
  </ol>

  <div class="carousel-inner">
        @foreach(var item in apartmentService.GetImages(singleton.currentApartament))
            {
                service.DownloadImageToWWWRoot(item.Name);
                if (j == 1)
                {
                    <div class="carousel-item active">
                        <img class="d-block w-100" src="/images/@service.file" alt="слайд @j">
                    </div>
                }
                else
                {
                    <div class="carousel-item">
                        <img class="d-block w-100" src="/images/@service.file" alt="слайд @j">
                    </div>
                }
                j++;
            }
  </div>
  <a class="carousel-control-prev" href="#currentApartament" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="carousel-control-next" href="#currentApartament" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
    
</div>
}
<br /><br /><br />

@code {
    int j = 1;

}
